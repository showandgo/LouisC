quarto render
sessionInfo()
package_version("quarto")
packageVersion("quarto")
install.packages("quarto")
packageVersion("quarto")
setwd("~/R_projs/shiny_apps/moku_boundaries/")
# Plot histogram of values
vector <- st_read("data/moku_final.shp")
install.packages("shiny")
setwd("/Users/louischua/R_projs/US_census")
setwd("~/R_projs/US_census")
data_dir <- ("~/data/nonspatial")
setwd("~/R_projs/US_census")
data_dir <- ("~/data/Geospatial")
data_DIR <- ("~/data/Geospatial")
setwd("~/R_projs/US_census")
data_DIR <- ("~/data/Geospatial")
vector_path <- file.path(data_DIR, "/tracts10.shp")
library(raster)
library(rgdal)
library(tidyverse)
library(sf)
library(ggspatial)
census10 <- st_make_valid(st_read(vector_path))
View(census10)
library(terra)
library(tidyverse)
library(sf)
library(ggspatial)
library(leaflet)
setwd("/Users/louischua/projects/dissertation_heeia")
moku <- "/Users/louischua/R_projs/shiny_apps/moku_boundaries/data/moku_final2.shp"
fresh <-  "/Users/louischua/data/Geospatial/wetlands/NWI_wetlands/Wetlands_subs.shp"
moku_land <- st_make_valid(st_read(moku))
moku_land <- st_set_crs(moku_land, 4326)
#moku_land <- st_transform(moku_land, crs = 2784)
fresh_wetl <- st_make_valid(st_read(fresh))
fresh_wetl <- st_transform(fresh_wetl, crs = 4326)
heeia_bound <- "/Users/louischua/projects/dissertation_heeia/data/heeia_bound.shp"
heeia_bound <- st_make_valid(st_read(heeia_bound))
heeia_bound<- st_transform(heeia_bound, crs = 4326)
new_crs <-  "EPSG:2784"
t1.2_counter <- st_make_valid(st_read("/Users/louischua/data/Geospatial/biomes/t1.2_ref_moku.shp"))
t1.2_counter <- st_transform(t1.2_counter, 4326)
t1.1_counter <- st_read("/Users/louischua/data/Geospatial/biomes/IUCN_Lvl3/T1.1_HI.shp") %>%
st_make_valid() %>%                             # fix invalid geometries
st_collection_extract("POLYGON") %>%            # keep only polygons
st_transform(4326)
# pre-contact ag foorprint from (Gon et al., 2018)
footprint <- "/Users/louischua/data/nonspatial/precontact_population/Footprint GIS Files/Oahu_HawnFootprint/Oahu_Footprint_Final_20101222.shp"
footprint <- st_make_valid(st_read(footprint))
footprint<- st_transform(footprint, crs = 4326)
footprint_heeia <- st_intersection(footprint, heeia_bound)
# pre-contact ag foorprint from (Gon et al., 2018)
footprint <- "/Users/louischua/data/nonspatial/precontact_population/Footprint GIS Files/Oahu_HawnFootprint/Oahu_Footprint_Final_20101222.shp"
footprint <- st_make_valid(st_read(footprint))
footprint<- st_transform(footprint, crs = 4326)
footprint_heeia <- st_intersection(footprint, heeia_bound)
heeia_bound <- "/Users/louischua/projects/dissertation_heeia/data/heeia_bound.shp"
heeia_bound <- st_make_valid(st_read(heeia_bound))
# pre-contact ag foorprint from (Gon et al., 2018)
footprint <- "/Users/louischua/data/nonspatial/precontact_population/Footprint GIS Files/Oahu_HawnFootprint/Oahu_Footprint_Final_20101222.shp"
footprint <- st_make_valid(st_read(footprint))
footprint <- st_make_valid(st_read(footprint))
footprint <- st_make_valid(st_read(footprint))
# pre-contact ag foorprint from (Gon et al., 2018)
footprint <- "/Users/louischua/data/nonspatial/precontact_population/Footprint GIS Files/Oahu_HawnFootprint/Oahu_Footprint_Final_20101222.shp"
footprint <- st_make_valid(st_read(footprint))
footprint<- st_transform(footprint, crs = 4326)
footprint_heeia <- st_intersection(footprint, heeia_bound)
heeia_bound<- st_transform(heeia_bound, crs = 4326)
footprint_heeia <- st_intersection(footprint, heeia_bound)
sf_use_s2(FALSE)
t1.1_counter <- t1.1_counter %>%
st_buffer(0)
heeia_bound <- heeia_bound %>%
st_buffer(0)
footprint_heeia <- st_intersection(footprint, heeia_bound)
# pre-contact ag (Lincoln et al., 2023)
trad_agroeco <- "/Users/louischua/projects/dissertation_heeia/data/Heeia_TradAgModel/Heeia_TradAgModel.shp"
trad_agroeco <- st_make_valid(st_read(trad_agroeco))
trad_agroeco<- st_transform(trad_agroeco, crs = 4326)
sf_use_s2(FALSE)
t1.1_counter <- t1.1_counter %>%
st_buffer(0)
heeia_bound <- heeia_bound %>%
st_buffer(0)
t1.1_heeia <- st_intersection(t1.1_counter, heeia_bound)
t1.1_heeia <- st_union(t1.1_heeia)
t1.2_heeia <- st_intersection(t1.2_counter, heeia_bound)
#t1.2_heeia <- st_union(t1.2_heeia)
# save map to HTML file
saveWidget(m, "/Users/louischua/R_projs/cv_website/maps/heeia_map.html", selfcontained = FALSE)
library(RColorBrewer)
pal <- colorFactor(
palette = brewer.pal(length(unique(footprint$COMMUNITY)), "Set2"),
domain = footprint$COMMUNITY
)
pal2 <- colorFactor(
palette = brewer.pal(length(unique(trad_agroeco$Ag_Type)), "Accent"),
domain = trad_agroeco$Ag_Type
)
m <- leaflet()  %>%
addProviderTiles("Esri.WorldImagery") %>%
addPolygons(data = heeia_bound,
color = "red",
fillOpacity = 0,
group = "Ahupuaa"
) %>%
addPolygons(data = footprint,
color = "darkgrey",
fillColor = ~pal(COMMUNITY),
label = ~COMMUNITY,
fillOpacity = 0.5,
weight = 1,
group = "(Gon) Pre-contact Footprint") %>%
#addLegend("bottomleft", pal = pal, values = footprint$COMMUNITY, title = "Community") %>%
addPolygons(data = trad_agroeco,
color = "darkgrey",
fillColor = ~pal2(Ag_Type),
label = ~Ag_Type,
fillOpacity = 0.5,
weight = 1,
group = "(Lincoln) Pre-contact Agroecology") %>%
#addLegend("bottomright", pal = pal2, values = trad_agroeco$Ag_Type, title = "Agroecology Type") %>%
addPolygons(data = t1.1_heeia,
color = "black",
fillColor = "forestgreen",
fillOpacity = 0.5,
group = "(IUCN) Lowland forest") %>%
addPolygons(data = t1.2_heeia,
color = "black",
fillColor = "#8c601b",
fillOpacity = 0.5,
group = "(IUCN) Dry forest & thickets") %>%
addLayersControl(overlayGroups = c("Ahupuaa", "(Gon) Pre-contact Footprint", "(Lincoln) Pre-contact Agroecology", "(IUCN) Lowland forest",
"(IUCN) Dry forest & thickets"),
options = layersControlOptions(collapsed = FALSE))
library(htmlwidgets)
# save map to HTML file
saveWidget(m, "/Users/louischua/R_projs/cv_website/maps/heeia_map.html", selfcontained = FALSE)
